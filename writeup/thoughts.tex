\documentclass{article}
\usepackage[colorlinks=true, linkcolor=blue, citecolor=black, urlcolor=black]{hyperref}
\usepackage[style=trad-abbrv]{biblatex}
\usepackage{amsmath,amsthm,amssymb,dsfont}
%\usepackage{draftwatermark}
%\SetWatermarkScale{8}
%\SetWatermarkText{\normalfont{DRAFT}}

\newcommand{\PairDecomp}{\mathcal{W}}

\title{TSP and WSP Thoughts and Ideas}
\author{Addison Hanrattie}

\newtheorem{thm}{Theorem}[section]
\newtheorem{lem}[thm]{Lemma}
\theoremstyle{definition}
\newtheorem{defn}[thm]{Definition}


\newcommand{\BigLength}{\mathcal{L}}
\newcommand{\Cover}{\mathcal{C}}

\newcommand{\dist}{\delta}
%\DeclareMathOperator{\dist}{\delta}

\DeclareMathOperator{\diam}{diam}

\begin{document}
\maketitle

\section{Work Area}
The main theorem I am proving here is Theorem~\ref{thm:wsp_tsp}.

\section{Definitions}
\begin{defn}
    A \textbf{Pair Decomposition} is a of $P$ is a set of pairs
    $$\PairDecomp = \left\{ \{A_1, B_1\}, \ldots, \{A_k,B_k\} \right\}$$
    such that (I) $\forall i; A_i,B_i \subset P$, (II) $\forall i; A_i \cap B_i = \emptyset$, and (III) $\bigcup_{i=1}^k A_i \otimes B_i = \binom{P}{2} = P \otimes P$.
\end{defn}

\begin{defn}
    $\dist(Q,R) = \min_{q \in Q, r \in R} |qr|$
\end{defn}

\begin{defn}
    The pair $\{Q,R\}$ is \textbf{$s$-well-separated} if
    $$\max\{\diam(Q), \diam(R)\} \leq \frac{1}{s} \cdot \dist(Q,R)$$
\end{defn}

\begin{defn}
    Let $P = A \cup B$ (with $A \cap B = \emptyset$). We say that $A$ and $B$ are \textbf{TSP-Separated} if the \emph{any} optimal TSP tour on $P$ visits all points in $A$ before any point in $B$ (or vice versa).
\end{defn}

\section{Some Proved Ideas}
\begin{thm}
Let $A$ and $B$ be two finite sets of points that are s-well-separated, let $p,p' \in A$, and let $q,q' \in B$. 
Then the following inequalities hold:
\begin{align*}
    |pq| &\leq (1 + 2/s) \cdot |pq'| \\
    |pq| &\leq (1 + 4/s) \cdot |p'q'| \\
    |pp'| &\leq (2/s) \cdot |pq| \\
\end{align*}
\end{thm}

\begin{thm}[You can ignore]
Within a ball of diameter $d$ within a metric space the difference in shortest hamiltonian paths between any two points is at most $2d$.
\end{thm}
\begin{proof}
    Fix one pair of endpoints $(a,b)$ and let $P_{a,b}$ be the optimal Hamiltonian path from $a$ to $b$ with length denoted $L(a,b)$.
    Next consider another pair of endpoints $(c,d)$ we can then build a hamiltonian path from $c$ to $d$ using $P_{a,b}$.
    \begin{enumerate}
        \item Start at $c$
        \item Travel from $c$ to $a$ for a cost of $\dist(c,a) \leq d$
        \item Follow the path $P_{a,b}$ from $a$ to $b$ for a cost of $c \leq L(a,b)$. (shortcutting $c,d$)
        \item Travel from $b$ to $d$ for a cost of $\dist(b,d) \leq d$
    \end{enumerate}
    %WLOG assume that $c$ occurs before $d$ on the path $P_{a,b}$. 
    %Then let $x$ be the point which precedes $c$ on the path and let $x'$ be the point that immediately follows. 
    %In the same way define $y$ and $y'$ for point $d$.
    %Since the triangle inequality must be obeyed we know 
    Since the space obeys the triangle inequality we know that during step 3 we can only decrease the cost by shortcutting. Thus the total cost of this path is at most $L(a,b) + 2d$. Furthermore we know that this cost must ceil whatever the optimal hamiltonian path from $c$ to $d$ is. Thus we have shown that $L(c,d) \leq L(a,b) + 2d$. By symmetry of the argument we can also show that $L(a,b) \leq L(c,d) + 2d$. Combining these two inequalities we have that $\forall a,b,c,d;|L(a,b) - L(c,d)| \leq 2d$ as desired. 
\end{proof}

\begin{thm}
    \label{thm:wsp_tsp}
    Suppose we have two sets of points $A$ and $B$ that are $s$-well-separated where $s > \frac{5}{2}$. Then $A$ and $B$ must be TSP-separated.
\end{thm}
\begin{proof}
    Let $|A| = n$ and $|B| = m$.
    WLOG assume that $n,m \geq 4$.
    Define $d = \max(\diam(A), \diam(B))$.

    Assume by contradiction that $A$ and $B$ are not TSP-separated.
    Then the optimal TSP tour on $A \cup B$ must contain at least four edges of the form $(a_i, b_i)$ where $a_i \in A$ and $b_i \in B$.
    WLOG let these edges be $\{b_1, a_1\}, \{a_2, b_2\}, \{b_3, a_3\}, \{a_4, b_4\}$ ordered as they appear in the tour and WLOG assume $a_3 \neq a_4$.
    Furthermore let ${a_{1*} a_{2*}}$ be some edge from the tour which lies between $a_1$ and $a_2$ in the tour as ordered above. 
    This give the following partial structure of the tour:
    $$b_1 \to a_1 \to \dots \to a_{1*} \to a_{2*} \to \dots \to a_2 \to b_2 \to \dots \to b_3 \to a_3 \to \dots \to a_4 \to b_4 \to \dots \to b_1$$
    
    Since the tour is optimal we know that it satisfies the 3-optimality condition implying the following:
    $|b_3 a_3| + |a_4 b_4| + |a_{1*} a_{2*}| \leq |a_{1*} a_4| + |a_3 a_{2*}| + |b_3 b_4|$.
    This is to say that the following tour must be at least as long as the original tour:
    $$b_1 \to a_1 \to \dots \to a_{1*} \to a_4 \to \dots \to a_3 \to a_{2*} \to \dots \to a_2 \to b_2 \to \dots \to b_3 \to b_4 \to \dots \to b_1$$

    Since $A$ and $B$ are $s$-well-separated we know that $\forall i,j; |a_i a_j| \leq \frac{2}{s} |a_i b_i|$. From this we can conclude the following:
    \begin{align*}
        |a_{1*} a_4| + |a_3 a_{2*}| + |b_3 b_4| &\leq \frac{2}{s}|b_3 a_3| + \frac{2}{s}|a_4 b_4| + |b_3 b_4| \\
        &\leq \frac{2}{s}\left(|b_3 a_3| + |a_4 b_4|\right) + |b_3 b_4| \\
    \end{align*}

    By previous facts we have that:
    \begin{align*}
        |b_3 a_3| + |a_4 b_4| + |a_{1*} a_{2*}| &\leq \frac{2}{s}\left(|b_3 a_3| + |a_4 b_4|\right) + |b_3 b_4| \\
        (1-\frac{2}{s}) \left(|b_3 a_3| + |a_4 b_4|\right) + |a_{1*} a_{2*}| &\leq |b_3 b_4| \\
        (1-\frac{2}{s}) \left(|b_3 a_3| + |a_4 b_4|\right)  &\leq |b_3 b_4| - |a_{1*} a_{2*}| \\
        (1-\frac{2}{s}) \left(sd + sd\right) &\leq d \\
        (1-\frac{2}{s}) \left(2sd\right) &\leq d \\
        2sd - 4d &\leq d \\
        2sd &\leq 5d \\
        s &\leq \frac{5}{2} \\
    \end{align*}
    However this contradicts our initial assumption that $s > \frac{5}{2}$. Thus we conclude that $A$ and $B$ must be TSP-separated as desired.
\end{proof}

\appendix
\section{Outdated proofs}
% this section is for if a better bound is found (ie proof is still valid but not as strong as desired)

\section{Dead ends}
% these theorems are false

%Let $A$ and $B$ be two finite sets of points that are TSP-separated. 
%Let $\Cover_k(S)$ denote the optimal cost of $k$ disjoint hamiltonian paths covering all points in set $S$.
%Let $\BigLength_{2k}(A,B)$ be the sum of the $2k$ shortest edges between $A$ and $B$ without point replacement.
%Then, $\Cover_1(A) + \Cover_1(B) + \BigLength_{2}(A,B) \leq \Cover_k(A) + \Cover_k(B) + \BigLength_{2k}(A,B)$.

%Let $A$ and $B$ be two finite sets of points that are TSP-separated. Then $\dist(A,B) \geq \max(\lambda(A), \lambda(B))$.
%[Where $\lambda(A) = \max(|a_1 a_2|, |a_2 a_3|, \dots, |a_{n-1} a_n|)$ so that it represents the longest edge in the hamiltonian path through $A$ which is derived as a subpath of the optimal TSP tour on $A \cup B$. The same definition applies to $\lambda(B)$.]

\end{document}